<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title></title>
	</head>
	<body>
	</body>
</html>
<script>
	// const a = {
	// 	name:"a"
	// }
	// const  b = a;
	// a.b = b;
	// console.log(a)
	
	// const  copy = (obj)=>{
	// 	const newObj = {}; 
	// 	const m = new Map();
	// 	const root = Symbol("root");
	// 	m.set(root,obj);
	// 	for(let k in obj){
	// 		if(typeof obj[k] !== 'object'){
	// 			newObj[k] = obj[k]
	// 		}else{
	// 			if(m.get(newObj[k])){
	// 				newObj[k] = newObj[k]
	// 			}else{
					
	// 			}
	// 		}
	// 	}
	// }
	
	// console.log(copy(a))
	// function deepCopy3(obj) {
	//     // hash表，记录所有的对象的引用关系
	//     let map = new WeakMap();
	//     function dp(obj) {
	//         let result = {}
	//         if(map.get(obj)) {
	//             return map.get(obj);
	//         }
	//         map.set(obj, result);
	// 		Object.keys(obj).forEach(key=>{
	// 			if(typeof obj[key] === 'object') {
	// 			    result[key] = dp(obj[key]);
	// 			}else {
	// 			    result[key] = obj[key];
	// 			}
	// 		})
	//         return result;
	//     }
	//     return dp(obj);
	// }
	
	// const obj= {
	//     a: {
	//         name: 'a'
	//     },
	//     b: {
	//         name: 'b'
	//     },
	//     c: {
	
	//     }
	// };
	// obj.c.e = obj;
	
	// const copy = deepCopy3(obj);
	// console.log(copy)
</script>
<script>
	const arr = [];
	function copy(obj){
		if(arr.indexOf(obj)>-1){
			console.log(222)
			return arr[arr.indexOf(obj)]
		}
		let result = {};
		arr.push(result);
		debugger
		Object.keys(obj).forEach(key=>{
			if(typeof obj[key] === 'object'){
				//console.log(key)
				result[key] = copy(obj[key]);
			}else{
				result[key] = obj[key]
			}
		})
		debugger
		return result;
	}
	const obj= {
	    a: {
	        name: 'a'
	    },
	    b: {
	        name: 'b'
	    },
	    c: {
	
	    }
	};
	obj.c.e = obj.a;
	const data = copy(obj);
	console.log(data)
</script>