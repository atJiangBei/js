<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title></title>
		<style type="text/css">
			*{
				margin: 0;
				padding: 0;
			}
		</style>
	</head>
	<body  style="overflow: scroll;">
		<div style="position: relative;">
			<div style="height: 100px;background: #00FFFF;"></div>
			<div style="height: 500px;overflow: auto;">
				<div style="height: 200px;background: #42B983;"></div>
				<div style="position: relative;">
					<div style="height: 600px;background: #007AFF;"></div>
					<div>
						<h3 id="current">标题</h3>
					</div>
					<div style="height: 600px;background: #008000;"></div>
				</div>
			</div>
		</div>
		<button id="btn" style="position: absolute;left:0;top:0;">按钮</button>
		<script>
			function getScrollParent(el){
				let parent = el.parentNode;
				while(parent){
					if(/scroll|auto/.test(getComputedStyle(parent).overflow)){
						return parent
					}
					parent = parent.parentNode
				}
			}
			function getRelativeParent(el){
				let parent = el.parentNode;
				while(parent){
					if(/relative|absolute/.test(getComputedStyle(parent).position)){
						return parent
					}
					parent = parent.parentNode
				}
			}
			const btn = document.getElementById("btn");
			const current = document.getElementById("current");
			const scrollParent = getScrollParent(current);
			console.log(current.offsetTop)
			if(scrollParent){
				scrollParent.addEventListener('scroll',(event)=>{
					const { top,right } = current.getBoundingClientRect()
					// const distance = current.offsetTop - scrollParent.scrollTop
					// btn.style.top = distance+'px'
					// console.log(distance)
					btn.style.top = top+'px'
					console.log(right)
				})
			}
			
		</script>
	</body>
</html>
