<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title>1</title>
		<meta content="width=device-width,initial-scale=1,maximum-scale=1,minimum-scale=1,user-scalable=no" name="viewport" />
		<meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">
		<style type="text/css">
			*{
				margin: 0;
				padding: 0;
			}
			button{
				height: 20px;
				border: 0;
				padding: 0;
			}
		</style>
	</head>
	<body>
		<div style="height: 1500px;position: relative;">
			<div style="height: 1479px;"></div>
			<button type="button" id="btn">按钮</button>
		</div>
		<script>
			const btn = document.getElementById("btn");
			const he = window.innerHeight;
			const fn = ()=>{
				console.log('看到我了')
			}
			
			let end = 0;
			function throttle(fn,time){
				let start = Date.now();
				if(start >= end +time){
					end = start + time
					fn()
				}
			}
			document.addEventListener("scroll",(event)=>{
				const stop = document.documentElement.scrollTop
				//console.log(stop + he,btn.offsetTop)
				
				if(stop + he >= btn.offsetTop){
					throttle(fn,100)
				}
			})
		</script>
	</body>
</html>
