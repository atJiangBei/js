<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title></title>
	</head>
	<body>
	</body>
</html>
<script>
	const data = [
	  {
	    id: 1,
	    label: '1',
	    children: [
	      {
	        id: 2,
	        label: '2',
	        children: [
	          { id: 4, label: '4'},
	          { id: 5, label: '5' }
	        ]
	      },
	      {
	        id: 3,
	        label: '3',
	        children: [
	          { id: 6, label: '6' },
	          { id: 7, label: '7' }
	        ]
	      }
	    ]
	  },
	  {
	    id: 11,
	    label: '11',
	    children: [
	      {
	        id: 21,
	        label: '21',
	        children: [
	          { id: 41, label: '41' },
	          { id: 51, label: '51' }
	        ]
	      },
	      {
	        id: 31,
	        label: '31',
	        children: [
	          { id: 61, label: '61' },
	          { id: 71, label: '71' }
	        ]
	      }
	    ]
	  }
	]
	
	
	const obj = {
	    id: 1,
	    label: '1',
	    children: [
	      {
	        id: 2,
	        label: '2',
	        children: [
	          { id: 4, label: '4'},
	          { id: 5, label: '5' }
	        ]
	      },
	      {
	        id: 3,
	        label: '3',
	        children: [
	          { id: 6, label: '6' },
	          { id: 7, label: '7' }
	        ]
	      }
	    ]
	}
	
	const transform = (arr)=>{
		//深拷贝原数据避免改变原数据
		arr = JSON.parse(JSON.stringify(arr))
		let newArr = []
		const cb = (obj)=>{
			const children = obj.children;
			if(children){
				for(let i=0;i<children.length;i++){
					const child = children[i];
					let ids = Array.isArray(obj.id)?obj.id:[obj.id];
					let labels = Array.isArray(obj.label)?obj.label:[obj.label];
					ids = ids.concat(child.id)
					labels = labels.concat(child.label)
					child.id = ids
					child.label = labels
					cb(child)
				}
			}else{
				newArr.push(obj)
			}
		}
		for(let i=0;i<arr.length;i++){
			const obj = arr[i];
			cb(obj)
		}
		return newArr
	}
	
	// const arrAll = [];
	// for(let i=0;i<a.length;i++){
	// 	arrAll.push(...transform(a[i]))
	// }
	console.log(data)
	
	console.log(transform(data));
	
</script>
